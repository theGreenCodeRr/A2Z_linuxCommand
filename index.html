<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A-Z Linux Commands with Visuals & AI Explanations</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        
        /* Animation for cards loading in */
        @keyframes card-load-in {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .command-card {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
            opacity: 0; /* Start hidden for animation */
            transform: translateY(20px);
        }
        
        /* Class to trigger the animation */
        .command-card.is-visible {
            animation: card-load-in 0.5s ease-out forwards;
        }

        .command-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .card-content {
            flex-grow: 1;
        }

        /* Styling and animation for the AI explanation box */
        .explanation-box {
            background-color: #f0f9ff;
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0.375rem;
            font-size: 0.9rem;
            line-height: 1.6;
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
            opacity: 0;
            transform: translateY(10px);
        }
        
        /* Styling for the AI finder result box */
        #finderResult .explanation-box {
             background-color: #f0fdf4;
             border-left-color: #22c55e;
        }

        .explanation-box.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Loading spinner */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 1rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Header gradient */
        header {
            background-image: linear-gradient(to right, #1f2937, #374151);
        }

        /* Styling for code blocks in results */
        #finderResult pre {
            background-color: #1f2937;
            color: #d1d5db;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Header -->
    <header class="bg-gray-800 text-white shadow-lg">
        <div class="container mx-auto px-6 py-4">
            <h1 class="text-3xl sm:text-4xl font-bold">A-Z Linux Commands</h1>
            <p class="mt-1 text-gray-300">Your visual and AI-powered guide to the Linux command line.</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-8">
        
        <!-- Search Bar -->
        <div class="mb-8">
            <input type="text" id="searchInput" onkeyup="searchCommands()" placeholder="Search for a command by name..." class="w-full p-4 rounded-lg border-2 border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-300 transition duration-300 ease-in-out">
        </div>
        
        <!-- AI Command Finder -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-12">
            <h2 class="text-2xl font-bold mb-2 text-gray-800">AI Command Finder</h2>
            <p class="text-gray-600 mb-4">Describe what you want to do, and our AI will find the right command for you.</p>
            <div class="flex flex-col sm:flex-row gap-4">
                <input type="text" id="naturalInput" placeholder="e.g., 'find all files larger than 100MB'" class="w-full p-4 rounded-lg border-2 border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition flex-grow">
                <button onclick="findCommand()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 flex items-center justify-center">
                    <span class="mr-2">✨</span> Find Command
                </button>
            </div>
            <div id="finderResult" class="mt-6">
                <!-- Gemini API results will be displayed here -->
            </div>
        </div>


        <!-- Commands Grid -->
        <div id="commandsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            
            <!-- Command cards will be populated here by JS -->

        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-12">
        <div class="container mx-auto px-6 py-4 text-center">
            <p>&copy; 2025 A-Z Linux Commands. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // --- DATA ---
        const commands = [
            { name: 'alias', desc: 'Create a shortcut for a longer command.', gif: 'https://placehold.co/600x400/333/fff?text=alias' },
            { name: 'cat', desc: 'Concatenate and display files.', gif: 'https://placehold.co/600x400/333/fff?text=cat' },
            { name: 'cd', desc: 'Change the current directory.', gif: 'https://i.imgur.com/9qK9bYF.gif' },
            { name: 'chmod', desc: 'Change file access permissions.', gif: 'https://placehold.co/600x400/333/fff?text=chmod' },
            { name: 'chown', desc: 'Change file owner and group.', gif: 'https://placehold.co/600x400/333/fff?text=chown' },
            { name: 'cp', desc: 'Copy files and directories.', gif: 'https://placehold.co/600x400/333/fff?text=cp' },
            { name: 'curl', desc: 'Transfer data from or to a server.', gif: 'https://placehold.co/600x400/333/fff?text=curl' },
            { name: 'df', desc: 'Display free disk space.', gif: 'https://placehold.co/600x400/333/fff?text=df' },
            { name: 'diff', desc: 'Compare files line by line.', gif: 'https://placehold.co/600x400/333/fff?text=diff' },
            { name: 'du', desc: 'Estimate file space usage.', gif: 'https://placehold.co/600x400/333/fff?text=du' },
            { name: 'find', desc: 'Search for files in a directory hierarchy.', gif: 'https://placehold.co/600x400/333/fff?text=find' },
            { name: 'free', desc: 'Display amount of free and used memory.', gif: 'https://placehold.co/600x400/333/fff?text=free' },
            { name: 'grep', desc: 'Print lines matching a pattern.', gif: 'https://placehold.co/600x400/333/fff?text=grep' },
            { name: 'head', desc: 'Output the first part of files.', gif: 'https://placehold.co/600x400/333/fff?text=head' },
            { name: 'history', desc: 'Display the command history list.', gif: 'https://placehold.co/600x400/333/fff?text=history' },
            { name: 'kill', desc: 'Send a signal to a process.', gif: 'https://placehold.co/600x400/333/fff?text=kill' },
            { name: 'less', desc: 'View file content one page at a time.', gif: 'https://placehold.co/600x400/333/fff?text=less' },
            { name: 'ln', desc: 'Create links between files.', gif: 'https://placehold.co/600x400/333/fff?text=ln' },
            { name: 'locate', desc: 'Find files by name, faster than find.', gif: 'https://placehold.co/600x400/333/fff?text=locate' },
            { name: 'ls', desc: 'List directory contents.', gif: 'https://i.imgur.com/3yS3b3Y.gif' },
            { name: 'man', desc: 'Display the manual for a command.', gif: 'https://placehold.co/600x400/333/fff?text=man' },
            { name: 'mkdir', desc: 'Make directories.', gif: 'https://i.imgur.com/S8i6c6a.gif' },
            { name: 'mv', desc: 'Move or rename files.', gif: 'https://placehold.co/600x400/333/fff?text=mv' },
            { name: 'ping', desc: 'Test the connection to a network host.', gif: 'https://placehold.co/600x400/333/fff?text=ping' },
            { name: 'ps', desc: 'Report a snapshot of the current processes.', gif: 'https://placehold.co/600x400/333/fff?text=ps' },
            { name: 'pwd', desc: 'Print name of current/working directory.', gif: 'https://i.imgur.com/AY8Z3So.gif' },
            { name: 'rm', desc: 'Remove files or directories.', gif: 'https://placehold.co/600x400/333/fff?text=rm' },
            { name: 'rmdir', desc: 'Remove empty directories.', gif: 'https://placehold.co/600x400/333/fff?text=rmdir' },
            { name: 'scp', desc: 'Securely copy files between hosts.', gif: 'https://placehold.co/600x400/333/fff?text=scp' },
            { name: 'sort', desc: 'Sort lines of text files.', gif: 'https://placehold.co/600x400/333/fff?text=sort' },
            { name: 'ssh', desc: 'Secure Shell client (remote login program).', gif: 'https://placehold.co/600x400/333/fff?text=ssh' },
            { name: 'sudo', desc: 'Execute a command as another user.', gif: 'https://placehold.co/600x400/333/fff?text=sudo' },
            { name: 'tail', desc: 'Output the last part of files.', gif: 'https://placehold.co/600x400/333/fff?text=tail' },
            { name: 'tar', desc: 'Store, list or extract files in an archive.', gif: 'https://placehold.co/600x400/333/fff?text=tar' },
            { name: 'top', desc: 'Display Linux processes.', gif: 'https://placehold.co/600x400/333/fff?text=top' },
            { name: 'touch', desc: 'Change file timestamps or create empty files.', gif: 'https://placehold.co/600x400/333/fff?text=touch' },
            { name: 'uname', desc: 'Print system information.', gif: 'https://placehold.co/600x400/333/fff?text=uname' },
            { name: 'wc', desc: 'Print newline, word, and byte counts.', gif: 'https://placehold.co/600x400/333/fff?text=wc' },
            { name: 'wget', desc: 'Non-interactive network downloader.', gif: 'https://placehold.co/600x400/333/fff?text=wget' },
            { name: 'whoami', desc: 'Print effective user ID.', gif: 'https://placehold.co/600x400/333/fff?text=whoami' },
        ];
        
        // --- DYNAMIC CONTENT & EVENT LISTENERS ---
        document.addEventListener("DOMContentLoaded", () => {
            const grid = document.getElementById('commandsGrid');
            
            // Populate the grid with command cards
            commands.forEach(command => {
                const card = document.createElement('div');
                card.className = 'command-card bg-white rounded-lg shadow-md overflow-hidden';
                card.innerHTML = `
                    <div class="p-6 card-content">
                        <h2 class="text-2xl font-bold mb-2">${command.name}</h2>
                        <p class="text-gray-600 mb-4">${command.desc}</p>
                        <button onclick="getExplanation('${command.name}', this)" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">
                            ✨ Explain This
                        </button>
                        <div class="explanation-container mt-4"></div>
                    </div>
                    <div class="bg-gray-50 p-4">
                        <img src="${command.gif}" alt="${command.name} command gif" class="w-full rounded-md" onerror="this.onerror=null;this.src='https://placehold.co/600x400/000000/FFFFFF?text=${command.name}+command';">
                    </div>
                `;
                grid.appendChild(card);
            });

            // Set up Intersection Observer for card animations
            const cards = document.querySelectorAll('.command-card');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        // Stagger the animation
                        setTimeout(() => {
                            entry.target.classList.add('is-visible');
                        }, index * 50);
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            cards.forEach(card => {
                observer.observe(card);
            });
        });


        // --- FUNCTIONS ---

        // Function to handle searching for commands
        function searchCommands() {
            let input = document.getElementById('searchInput').value.toLowerCase();
            let cards = document.getElementsByClassName('command-card');

            for (let i = 0; i < cards.length; i++) {
                let title = cards[i].getElementsByTagName('h2')[0];
                if (title) {
                    let textValue = title.textContent || title.innerText;
                    if (textValue.toLowerCase().indexOf(input) > -1) {
                        cards[i].style.display = "flex";
                    } else {
                        cards[i].style.display = "none";
                    }
                }
            }
        }

        // Function for the AI Command Finder
        async function findCommand() {
            const userInput = document.getElementById('naturalInput').value;
            const resultContainer = document.getElementById('finderResult');

            if (!userInput.trim()) {
                resultContainer.innerHTML = `<div class="explanation-box visible text-yellow-800" style="background-color: #fefce8; border-left-color: #facc15;">Please describe what you want to do.</div>`;
                return;
            }

            // Show loader
            resultContainer.innerHTML = '<div class="loader"></div>';

            const prompt = `You are a Linux command expert. A user wants to perform a task. Based on their description, provide the single most appropriate Linux command or a short, piped command chain to accomplish it. Explain briefly what the command does.

User's task: "${userInput}"

Your response should be in HTML format. Provide the command inside a <pre><code> block for proper formatting, and the explanation in a paragraph below it.`;

            const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
            const payload = { contents: chatHistory };
            const apiKey = ""; // API key is handled by the environment
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }

                const result = await response.json();
                
                let resultText = "Sorry, I couldn't find a command for that right now.";
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    resultText = result.candidates[0].content.parts[0].text;
                }
                
                resultContainer.innerHTML = `<div class="explanation-box visible">${resultText}</div>`;

            } catch (error) {
                console.error('Error finding command:', error);
                resultContainer.innerHTML = `<div class="explanation-box visible text-red-700">Error: Could not process request. Please try again later.</div>`;
            }
        }


        // Function to get an explanation for a specific command
        async function getExplanation(commandName, buttonElement) {
            const explanationContainer = buttonElement.nextElementSibling;
            
            if (explanationContainer.innerHTML.trim() !== '') {
                explanationContainer.innerHTML = '';
                return;
            }

            explanationContainer.innerHTML = '<div class="loader"></div>';
            buttonElement.disabled = true;
            buttonElement.classList.add('opacity-50', 'cursor-not-allowed');

            const prompt = `Explain the Linux command '${commandName}' in simple, beginner-friendly terms. Describe what it's used for and explain its 2 or 3 most common options or flags. Format the response in HTML with a main paragraph and an unordered list for the flags.`;

            const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
            const payload = { contents: chatHistory };
            const apiKey = ""; // API key is handled by the environment
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }

                const result = await response.json();
                
                let explanationText = "Sorry, I couldn't get an explanation right now.";
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    explanationText = result.candidates[0].content.parts[0].text;
                }
                
                const explanationBox = document.createElement('div');
                explanationBox.className = 'explanation-box';
                explanationBox.innerHTML = explanationText;
                
                explanationContainer.innerHTML = ''; 
                explanationContainer.appendChild(explanationBox);

                setTimeout(() => {
                    explanationBox.classList.add('visible');
                }, 10);

            } catch (error) {
                console.error('Error fetching explanation:', error);
                explanationContainer.innerHTML = `<div class="explanation-box visible text-red-700">Error: Could not fetch explanation. Please try again later.</div>`;
            } finally {
                buttonElement.disabled = false;
                buttonElement.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }
    </script>

</body>
</html>
